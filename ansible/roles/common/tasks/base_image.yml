---
# file: roles/common/tasks/base_image.yml

- name: ensure base image dockerfile is configured
  template:
    dest: "{{ microwizard_docker_images }}/base/Dockerfile"
    src: base_Dockerfile.j2
  tags:
    - common
    - base

- name: ensure base image is built
  docker_image:
    name: microwizard/base
    nocache: yes
    path: "{{ microwizard_docker_images }}/base"
    state: present
  notify:
    - list untagged images
    - show untagged images
    - remove untagged images
  tags:
    - common
    - base